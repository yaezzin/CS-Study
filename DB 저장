저장 방식에 따른 NoSQL 분류

Key-Value Model, Document Model, Column Model, Graph Model

1. Key-Value Model

가장 기본적인 형태의 NoSQL 이며 키 하나로 데이터 하나를 저장하고 조회할 수 있는 단일 키-값 구조를 갖는다. 데이터의 항목에는 제한이 없다.
대표적 모델은 AWS의 DynamoDB이다. https://aws.amazon.com/ko/nosql/key-value/
단순한 저장구조로 인하여 복잡한 조회 연산을 지원하지 않는다. 또한 고속 읽기와 쓰기에 최적화된 경우가 많다. 관계형 데이터베이스에 비하여 페이지당 제공하는 오버헤드가 적다.
사용자의 프로필 정보, 웹 서버 클러스터를 위한 세션 정보, 장바구니 정보, URL 단축 정보 저장 등에 사용한다. 
하나의 서비스 요청에 다수의 데이터 조회 및 수정 연산이 발생하면 트랜잭션 처리가 불가능하여 데이터 정합성을 보장할 수 없다. ex) Redis
하지만 분산 처리 및 저장을 통해 한꺼번에 수백만 명의 사용자에게 서비스를 제공하는 동시에 대량의 데이터 처리와 매우 많은 양의 상태 변경 작업을 처리할 수 있다. ex) Dynamo
예를 들어 세션 데이터를 봐보면 세션 데이터에는 여러 항목이 있고(사용자 프로필 정보, 메시지, 개인 설정 데이터 및 테마, 권장 사항, 사용자 대상 판촉 및 할인) 기본 키 이외에 쿼리 되지 않는다.
따라서 하나의 서비스 요청에 대해 다수의 수정 연산이 필요없고 대량의 유저 데이터 처리가 필요하기 때문에 Key-Value 모델이 적합하다.
https://severalnines.com/blog/redis-vs-dynamodb-comparison/


2. Document Model

키-값 모델을 개념적으로 확장한 구조로 하나의 키에 하나의 구조화된 문서를 저장하고 조회한다. 논리적인 데이터 저장과 조회 방법이 관계형 데이터베이스와 유사하다. 키는 문서에 대한 ID 로 표현된다. 
대표적인 모델은 MongoDB이다. https://kciter.so/posts/about-mongodb
저장된 문서를 컬렉션으로 관리하며 문서 저장과 동시에 문서 ID 에 대한 인덱스를 생성한다. 문서 ID 에 대한 인덱스를 사용하여 O(1) 시간 안에 문서를 조회할 수 있다.
Embedded Document: Join기능을 대체, 여러개의 테이블을 하나의 Document 내에 모아둘 수 있음, View처럼 한번에 조회 가능
최대한 단순하면서 많은 데이터 다루고자 하는 경우, Hadoop, Spark와의 통합 지원가능, RDBMS와 다르게 데이터 구조 자유로움
https://kciter.so/images/2021-02-25-about-mongodb/mongodb-layer.jpg


3. Column Model

하나의 키에 여러 개의 컬럼 이름과 컬럼 값의 쌍으로 이루어진 데이터를 저장하고 조회한다. 모든 컬럼은 항상 타임 스탬프 값과 함께 저장된다.
구글의 빅테이블이 대표적인 예로 차후 컬럼형 NoSQL 은 빅테이블의 영향을 받았다. 이러한 이유로 Row key, Column Key, Column Family 같은 빅테이블 개념이 공통적으로 사용된다. 저장의 기본 단위는 컬럼으로 컬럼은 컬럼 이름과 컬럼 값, 타임스탬프로 구성된다. 이러한 컬럼들의 집합이 로우(Row)이며, 로우키(Row key)는 각 로우를 유일하게 식별하는 값이다. 이러한 로우들의 집합은 키 스페이스(Key Space)가 된다.
대부분의 컬럼 모델 NoSQL 은 쓰기와 읽기 중에 쓰기에 더 특화되어 있다. 데이터를 먼저 커밋로그와 메모리에 저장한 후 응답하기 때문에 빠른 응답속도를 제공한다. 그렇기 때문에 읽기 연산 대비 쓰기 연산이 많은 서비스나 빠른 시간 안에 대량의 데이터를 입력하고 조회하는 서비스를 구현할 때 가장 좋은 성능을 보인다. 채팅 내용 저장, 실시간 분석을 위한 데이터 저장소 등의 서비스 구현에 적합하다.
